error_msg =e[[1]]
end_time = Sys.time()
exe_time_sec = end_time - start_time
val2=paste0(paste0("'",end_time,"',"),
paste0(exe_time_sec,","),
paste0(0,","),
paste0('"',error_type,'",'),
paste0('"',error_msg,'",'),
paste0(rep("'NA'",2), collapse = ", "),
paste0(","),
paste0(rep("''", 3), collapse = ", "),
paste0(", '",log_rel_date,"',"),
paste0("'",Sys.time(),"'"))
print(val2)
query  = paste0(q1,val1,val2,");")
query <- gsub("'NA'", "NULL", query)
print(query)
#execute the query
con  <- dbConnect(RMySQL:::MySQL(), dbname = DBName, host = hostname, port = portnum,
user = username, password = password)
# dbExecute(con, query)
dbDisconnect(con)
}
)
}
## ----------------------------------------
niif_heat_map_exp <- function(df,negative=TRUE){
text_size=40
if  (negative==TRUE){
v1=c(df$value_1)
neg_indx=c(which(v1<0))
v1=format(roundexcel((v1),1),nsmall=1,big.mark=",")
v3=paste0("(",format(abs(as.numeric(v1[neg_indx])),nsmall=1),")")
v1[neg_indx]=v3
line_lab_1=v1
}else{line_lab_1=format(roundexcel(df$value_1,1),nsmall=1, big.mark=",")}
line_lab_1=str_replace_all(line_lab_1,"   NA",'')
print(line_lab_1)
tryCatch({
########################################################GRAPH#####################
map=ggplot(data=df,aes(fill=as.factor(Category),color=as.factor(Category)))+
ggplot2::geom_sf(colour="gray48")+
geom_sf_text(aes(label=line_lab_1),size=2,color="black",na.rm = TRUE)+
coord_sf(xlim = c(68.35859, 97.44),
ylim = c(6.733651, 37.03473),
expand = FALSE)+
scale_fill_manual(values=my_chart_col,na.value = "#D9D9D9")+
guides(fill =guide_legend(nrow=2,byrow=TRUE,reverse=FALSE,order =1))+
common_theme()+
cutom_theme_map()+
theme(plot.margin = margin(0, 0, 0, 0))
########################################################RETURN######################
return(map)
},
error = function(e){
error_type = class(e)[1][[1]]
error_msg =e[[1]]
end_time = Sys.time()
exe_time_sec = end_time - start_time
val2=paste0(paste0("'",end_time,"',"),
paste0(exe_time_sec,","),
paste0(0,","),
paste0('"',error_type,'",'),
paste0('"',error_msg,'",'),
paste0(rep("'NA'",2), collapse = ", "),
paste0(","),
paste0(rep("''", 3), collapse = ", "),
paste0(", '",log_rel_date,"',"),
paste0("'",Sys.time(),"'"))
print(val2)
query  = paste0(q1,val1,val2,");")
query <- gsub("'NA'", "NULL", query)
print(query)
#execute the query
con  <- dbConnect(RMySQL:::MySQL(), dbname = DBName, host = hostname, port = portnum,
user = username, password = password)
# dbExecute(con, query)
dbDisconnect(con)
}
)
}
## ----------------------------------------
sigmoid_1=function(x){
return (1/(1+exp(-x/k)))
}
k=10
min_max_normalize <- function(x) {
normalized <- (x - min(x)) / (max(x) - min(x))
return(normalized)
}
ihmcl_normalize=function(x){
return(sqrt(x)/10000)
}
niif_bubble_heat_map <- function(df,k1=5){
tryCatch({
df2=df
df1=df[!duplicated(df[c('State')]), ]
map=ggplot() +
geom_sf(data = df1, fill='gray96',colour="grey48") +
geom_sf(data =df2,
pch =19,
size=ihmcl_normalize(df2$value_a)*k1,
aes(geometry=Point,colour=Category))+
# geom_sf(data =df2,pch =21,
#          size=3,
#          colour="#F8F8FF",
#          aes(fill=Category,
#              geometry=Point,
#              colour=Category)) +
coord_sf(xlim = c(68.35859, 97.44),
ylim = c(6.733651, 37.03473),
expand = FALSE)+
# scale_fill_manual(values=my_chart_col)+
scale_color_manual(values = my_chart_col,na.value = "grey")+
# scale_color_manual(values = my_legends_col,na.value = "grey")+
# guides(fill =guide_legend(order =1,reverse=TRUE))+
guides(fill =guide_legend(nrow=2,byrow=TRUE,reverse=FALSE,order =1))+
common_theme()+
cutom_theme_map()+
theme(plot.margin = margin(0, 0, 0, 0))
########################################################RETURN######################
return(map)
},
error = function(e){
error_type = class(e)[1][[1]]
error_msg =e[[1]]
end_time = Sys.time()
exe_time_sec = end_time - start_time
val2=paste0(paste0("'",end_time,"',"),
paste0(exe_time_sec,","),
paste0(0,","),
paste0('"',error_type,'",'),
paste0('"',error_msg,'",'),
paste0(rep("'NA'",2), collapse = ", "),
paste0(","),
paste0(rep("''", 3), collapse = ", "),
paste0(", '",log_rel_date,"',"),
paste0("'",Sys.time(),"'"))
print(val2)
query  = paste0(q1,val1,val2,");")
query <- gsub("'NA'", "NULL", query)
print(query)
#execute the query
con  <- dbConnect(RMySQL:::MySQL(), dbname = DBName, host = hostname, port = portnum,
user = username, password = password)
# dbExecute(con, query)
dbDisconnect(con)
}
)
}
## ----------------------------------------
line_thick=0.60
bar_thick=8
max_overlap=10
num_brek=4
#####legends
legend_key_size=0.30
legend_key_width=0.30
legend_key_height=0.30
key_spacing=0.05
Position="center"
legend_start=c(0.5,-20)
####Fonts
text_size=12
chart_label=8
v_just=0
x_v=0
nug_x=0.1
nug_y=0.3
my_chart_col=c("#C42727","#E25822","#E9791A","#F19A11","#F8BA09","#A5C779","#96ED89","#45BF55","#168039","#177244")
my_chart_col=c('< -20%'="#C42727",
'-20% to < -15%'="#E25822",
'-15% to < -10%'="#E9791A",
'-10% to < -05%'="#F19A11",
'-05% to < +00%'="#F8BA09",
'+00% to < +05%'="#A5C779",
'+05% to < +10%'="#96ED89",
'+10% to < +15%'="#45BF55",
'+15% to < +20%'="#168039",
'> 20%'="#177244")
## ----------------------------------------
gst=df_to_geo_json("mv_gst_tax_state_india_growth",'growth')
gst_t=gst[2][[1]]
gst_map=niif_heat_map(gst[1][[1]])
## ----eval=FALSE, include=FALSE-----------
## cd=df_to_geo_json("mv_rbi_state_cd_ratio_growth",'growth')
## cd_t=cd[2][[1]]
## cd_map=niif_heat_map(cd[1][[1]])
##
## ----------------------------------------
power_de=df_to_geo_json("mv_state_pwr_overdues_growth",'growth')
power_de_t=power_de[2][[1]]
power_de_map=niif_heat_map(power_de[1][[1]])
## ----------------------------------------
credit=df_to_geo_json("mv_rbi_state_credit_growth",'growth')
credit_t=credit[2][[1]]
credit_map=niif_heat_map(credit[1][[1]])
## ----------------------------------------
deposit=df_to_geo_json("mv_rbi_state_deposit_growth",'growth')
deposit_t=deposit[2][[1]]
deposit_map=niif_heat_map(deposit[1][[1]])
## ----------------------------------------
air=df_to_geo_json("mv_dgca_citywise_passngers_arrival_growth",'growth','Total_Passengers',
bubble_map = TRUE)
air_t=air[2][[1]]
air_map=niif_bubble_heat_map(air[1][[1]],k1=30)
## ----------------------------------------
epfo=df_to_geo_json("mv_epfo_state_growth",'growth')
epfo_t=epfo[2][[1]]
epfo_map=niif_heat_map(epfo[1][[1]])
## ----------------------------------------
tw=df_to_geo_json("mv_vr_gr_2w_state",'growth')
tw_t=tw[2][[1]]
tw_map=niif_heat_map(tw[1][[1]])
## ----------------------------------------
tw_e=df_to_geo_json("mv_vr_gr_2w_elec_state",'growth')
tw_e_t1=tw_e[2][[1]]
tw_e_map1=niif_heat_map(tw_e[1][[1]])
## ----------------------------------------
fw=df_to_geo_json("mv_vr_gr_4w_state",'growth')
fw_t=fw[2][[1]]
fw_map=niif_heat_map(fw[1][[1]])
## ----------------------------------------
fw_e=df_to_geo_json("mv_vr_gr_4w_elec_state",'growth')
fw_e_t=fw_e[2][[1]]
fw_e_map=niif_heat_map(fw_e[1][[1]])
## ----------------------------------------
ihmcl_st_col_a=df_to_geo_json("mv_ihmcl_statewise_collection_amount_growth",'growth')
ihmcl_st_col_a_t=ihmcl_st_col_a[2][[1]]
ihmcl_st_col_a_map=niif_heat_map_exp(ihmcl_st_col_a[1][[1]])
## ----------------------------------------
ihmcl_st_col_v=df_to_geo_json("mv_ihmcl_statewise_collection_traffic_growth",
'growth')
ihmcl_st_col_v_t=ihmcl_st_col_v[2][[1]]
ihmcl_st_col_v_map=niif_heat_map_exp(ihmcl_st_col_v[1][[1]])
## ----------------------------------------
ihmcl_com_noncom_a=df_to_geo_json("mv_ihmcl_overall",
'Growth_Amount','Total_Amount',bubble_map = TRUE)
ihmcl_com_noncom_a_t=ihmcl_com_noncom_a[2][[1]]
ihmcl_com_noncom_a_map=niif_bubble_heat_map(ihmcl_com_noncom_a[1][[1]],k1=16)
## ----------------------------------------
ihmcl_com_noncom_v=df_to_geo_json("mv_ihmcl_overall",'Growth_Value','Total_Amount',
bubble_map = TRUE)
ihmcl_com_noncom_v_t=ihmcl_com_noncom_v[2][[1]]
ihmcl_com_noncom_v_map=niif_bubble_heat_map(ihmcl_com_noncom_v[1][[1]],k1=16)
## ----------------------------------------
plz_cnt_old=get_plaza_count('mv_ihmcl_base_data_old',type=FALSE)
plz_cnt_n=get_plaza_count('mv_ihmcl_curr',type=FALSE)
plz_c_map=get_plaza_count('mv_ihmcl_base_data',type=FALSE)
#OVERALL
hd1="Growth Toll Collections Overall (% yoy), "
ar1=c('Relevant_Date','overall_col','overall_map_col','Val_per_trnx','overall_map_val_per_trnx')
df_o_c=combine_cur_prev_df(q1,q2)
df_o_mp=combine_cur_prev_df(q3,q4)
df_o_cf=combine_ovl_map_df(df_o_c,df_o_mp,ar1)
df_o_cf=generate_df_ihmcl(df_o_cf,collection =TRUE,hd1)
ar2=c('Relevant_Date','overall_tranx','overall_map_tranx','Val_per_trnx','overall_map_val_per_trnx')
hd2="Growth Toll Traffic Overall (% yoy), "
df_o_tf=combine_ovl_map_df(df_o_c,df_o_mp,ar2)
df_o_tf=generate_df_ihmcl(df_o_tf,collection =FALSE,hd=hd2)
## ----------------------------------------
ihmcl_st_non_com_a=df_to_geo_json("mv_ihmcl_statewise_non_comm_amount_growth",'growth')
ihmcl_st_non_com_a_t=ihmcl_st_non_com_a[2][[1]]
ihmcl_st_non_com_a_map=niif_heat_map_exp(ihmcl_st_non_com_a[1][[1]])
## ----------------------------------------
ihmcl_st_non_com_v=df_to_geo_json("mv_ihmcl_statewise_non_comm_traffic_growth",
'growth')
ihmcl_st_non_com_v_t=ihmcl_st_non_com_v[2][[1]]
ihmcl_st_non_com_v_map=niif_heat_map_exp(ihmcl_st_non_com_v[1][[1]])
## ----------------------------------------
ihmcl_non_com_a=df_to_geo_json("mv_ihmcl_non_commercial",'Growth_Amount','Total_Amount',
bubble_map = TRUE)
ihmcl_non_com_a_t=ihmcl_non_com_a[2][[1]]
ihmcl_non_com_a_map=niif_bubble_heat_map(ihmcl_non_com_a[1][[1]],k1=16)
## ----------------------------------------
ihmcl_non_com_v=df_to_geo_json("mv_ihmcl_non_commercial",'Growth_Value','Total_Amount',
bubble_map = TRUE)
ihmcl_non_com_v_t=ihmcl_non_com_v[2][[1]]
ihmcl_non_com_v_map=niif_bubble_heat_map(ihmcl_non_com_v[1][[1]],k1=16)
## ----------------------------------------
#NON COMMERCIAL
hd1="Growth in Toll Collection of Non-Commercial Vehicles (% yoy), "
ar1=c('Relevant_Date','Ncom_overall_col','Ncom_map_col','Ncom_overall_Val_per_tranx','Ncom_map_Val_per_tranx')
df_o_c=combine_cur_prev_df(q5,q6)
df_o_mp=combine_cur_prev_df(q7,q8)
df_ncm_cf=combine_ovl_map_df(df_o_c,df_o_mp,ar1)
df_ncm_cf=generate_df_ihmcl(df_ncm_cf,collection =TRUE,hd=hd1)
ar2=c('Relevant_Date','Ncom_overall_tranx','Ncom_map_tranx','Ncom_overall_Val_per_tranx','Ncom_map_Val_per_tranx')
hd2="Growth in Toll Traffic of Non-Commercial Vehicles  (% yoy), "
df_ncm_tf=combine_ovl_map_df(df_o_c,df_o_mp,ar2)
df_ncm_tf=generate_df_ihmcl(df_ncm_tf,collection =FALSE,hd=hd2)
## ----------------------------------------
ihmcl_st_com_a=df_to_geo_json("mv_ihmcl_statewise_comm_amount_growth",'growth')
ihmcl_st_com_a_t=ihmcl_st_com_a[2][[1]]
ihmcl_st_com_a_map=niif_heat_map_exp(ihmcl_st_com_a[1][[1]])
## ----------------------------------------
ihmcl_st_com_v=df_to_geo_json("mv_ihmcl_statewise_comm_traffic_growth",
'growth')
ihmcl_st_com_v_t=ihmcl_st_com_v[2][[1]]
ihmcl_st_com_v_map=niif_heat_map_exp(ihmcl_st_com_v[1][[1]])
## ----------------------------------------
ihmcl_com_a=df_to_geo_json("mv_ihmcl_commercial",'Growth_Amount','Total_Amount',bubble_map = TRUE)
ihmcl_com_a_t=ihmcl_com_a[2][[1]]
ihmcl_com_a_map=niif_bubble_heat_map(ihmcl_com_a[1][[1]],k1=16)
## ----------------------------------------
ihmcl_com_v=df_to_geo_json("mv_ihmcl_commercial",'Growth_Value','Total_Amount',bubble_map = TRUE)
ihmcl_com_v_t=ihmcl_com_v[2][[1]]
ihmcl_com_v_map=niif_bubble_heat_map(ihmcl_com_v[1][[1]],k1=16)
## ----------------------------------------
#COMMERCIAL
hd1="Growth in Toll Collections of Commercial Vehicles (% yoy), "
ar1=c('Relevant_Date','com_overall_col','com_map_col','com_overall_Val_per_tranx','com_map_Val_per_tranx')
df_o_c=combine_cur_prev_df(q9,q10)
df_o_mp=combine_cur_prev_df(q11,q12)
df_cm_cf=combine_ovl_map_df(df_o_c,df_o_mp,ar1)
df_cm_cf=generate_df_ihmcl(df_cm_cf,collection =TRUE,hd=hd1)
ar2=c('Relevant_Date','com_overall_tranx','com_map_tranx','com_overall_Val_per_tranx','com_map_Val_per_tranx')
hd2="Growth in Toll Traffic of Commercial Vehicles (% yoy), "
df_cm_tf=combine_ovl_map_df(df_o_c,df_o_mp,ar2)
df_cm_tf=generate_df_ihmcl(df_cm_tf,collection =FALSE,hd=hd2)
## ----------------------------------------
ihmcl_st_overall_con_a=df_to_geo_json("mv_ihmcl_statewise_conc_amount_growth",'growth')
ihmcl_st_overall_con_a_t=ihmcl_st_overall_con_a[2][[1]]
ihmcl_st_overall_con_a_map=niif_heat_map_exp(ihmcl_st_overall_con_a[1][[1]])
## ----------------------------------------
ihmcl_st_overall_con_v=df_to_geo_json("mv_ihmcl_statewise_conc_traffic_growth",
'growth')
ihmcl_st_overall_con_v_t=ihmcl_st_overall_con_v[2][[1]]
ihmcl_st_overall_con_v_map=niif_heat_map_exp(ihmcl_st_overall_con_v[1][[1]])
## ----------------------------------------
ihmcl_overall_con_a=df_to_geo_json("mv_ihmcl_overall_conc",
'Growth_Amount','Total_Amount',bubble_map = TRUE)
ihmcl_overall_con_a_t=ihmcl_overall_con_a[2][[1]]
ihmcl_overall_con_a_map=niif_bubble_heat_map(ihmcl_overall_con_a[1][[1]],k1=16)
## ----------------------------------------
ihmcl_overall_con_v=df_to_geo_json("mv_ihmcl_overall_conc",
'Growth_Value','Total_Amount',bubble_map = TRUE)
ihmcl_overall_con_v_t=ihmcl_overall_con_v[2][[1]]
ihmcl_overall_con_v_map=niif_bubble_heat_map(ihmcl_overall_con_v[1][[1]],k1=16)
## ----------------------------------------
plz_cnt_old=get_plaza_count('mv_ihmcl_base_data_old',type=TRUE)
plz_cnt_n=get_plaza_count('mv_ihmcl_curr',type=TRUE)
plz_c_map=get_plaza_count('mv_ihmcl_base_data',type=TRUE)
#Overal Consinire
hd1="Growth in Toll Collections of Overall Conc Vehicles (% yoy), "
ar1=c('Relevant_Date','overall_col','overall_map_col','Overall_Val_per_trnx','Overall_Val_per_trnx')
df_o_c=combine_cur_prev_df(q13,q14)
df_o_mp=combine_cur_prev_df(q15,q16)
df_o_cn_cf=combine_ovl_map_df(df_o_c,df_o_mp,ar1)
df_o_cn_cf=generate_df_ihmcl(df_o_cn_cf,collection =TRUE,hd=hd1)
ar2=c('Relevant_Date','overall_tranx','overall_map_tranx','Overall_Val_per_trnx','Overall_Val_per_trnx')
hd2="Growth in Toll Traffic of Overall Conc Vehicles (% yoy), "
df_o_cn_tf=combine_ovl_map_df(df_o_c,df_o_mp,ar2)
df_o_cn_tf=generate_df_ihmcl(df_o_cn_tf,collection =FALSE,hd=hd2)
## ----------------------------------------
ihmcl_st_com_con_a=df_to_geo_json("mv_ihmcl_statewise_conc_comm_amount_growth",'growth')
ihmcl_st_com_con_a_t=ihmcl_st_com_con_a[2][[1]]
ihmcl_st_com_con_a_map=niif_heat_map_exp(ihmcl_st_com_con_a[1][[1]])
## ----------------------------------------
ihmcl_st_com_con_v=df_to_geo_json("mv_ihmcl_statewise_conc_comm_traffic_growth",
'growth')
ihmcl_st_com_con_v_t=ihmcl_st_com_con_v[2][[1]]
ihmcl_st_com_con_v_map=niif_heat_map_exp(ihmcl_st_com_con_v[1][[1]])
## ----------------------------------------
ihmcl_com_con_a=df_to_geo_json("mv_ihmcl_commercial_conc",
'Growth_Amount','Total_Amount',bubble_map = TRUE)
ihmcl_com_con_a_t=ihmcl_com_con_a[2][[1]]
ihmcl_com_con_a_map=niif_bubble_heat_map(ihmcl_com_con_a[1][[1]],k1=16)
## ----------------------------------------
ihmcl_com_con_v=df_to_geo_json("mv_ihmcl_commercial_conc",
'Growth_Value','Total_Amount',bubble_map = TRUE)
ihmcl_com_con_v_t=ihmcl_com_con_v[2][[1]]
ihmcl_com_con_v_map=niif_bubble_heat_map(ihmcl_com_con_v[1][[1]],k1=16)
## ----------------------------------------
#Commercial-Consinire
ar1=c('Relevant_Date','com_conc_Overall_col','com_conc_map_col','com_conc_Overall_Val_per_tranx',
'com_conc_map_Val_per_tranx')
hd1="Growth in Toll Collections of Commercial Conc Vehicles (% yoy), "
df_o_c=combine_cur_prev_df(q21,q22)
df_o_mp=combine_cur_prev_df(q23,q24)
df_cm_cn_cf=combine_ovl_map_df(df_o_c,df_o_mp,ar1)
df_cm_cn_cf=generate_df_ihmcl(df_cm_cn_cf,collection =TRUE,hd=hd1)
ar2=c('Relevant_Date','com_conc_Overall_tranx','com_conc_map_tranx',
'com_conc_Overall_Val_per_tranx','com_conc_map_Val_per_tranx')
hd2="Growth in Toll Traffic of Commercial Conc Vehicles (% yoy), "
df_cm_cn_tf=combine_ovl_map_df(df_o_c,df_o_mp,ar2)
df_cm_cn_tf=generate_df_ihmcl(df_cm_cn_tf,collection =FALSE,hd=hd2)
## ----------------------------------------
ihmcl_st_non_con_a=df_to_geo_json("mv_ihmcl_statewise_non_conc_amount_growth",'growth')
ihmcl_st_non_con_a_t=ihmcl_st_non_con_a[2][[1]]
ihmcl_st_non_con_a_map=niif_heat_map_exp(ihmcl_st_non_con_a[1][[1]])
## ----------------------------------------
ihmcl_st_non_con_v=df_to_geo_json("mv_ihmcl_statewise_non_conc_traffic_growth",
'growth')
ihmcl_st_non_con_v_t=ihmcl_st_non_con_v[2][[1]]
ihmcl_st_non_con_v_map=niif_heat_map_exp(ihmcl_st_non_con_v[1][[1]])
## ----------------------------------------
ihmcl_non_con_a=df_to_geo_json("mv_ihmcl_overall_non_conc",
'Growth_Amount','Total_Amount',bubble_map = TRUE)
ihmcl_non_con_a_t=ihmcl_non_con_a[2][[1]]
ihmcl_non_con_a_map=niif_bubble_heat_map(ihmcl_non_con_a[1][[1]],k1=16)
## ----------------------------------------
ihmcl_non_con_v=df_to_geo_json("mv_ihmcl_overall_non_conc",
'Growth_Value','Total_Amount',bubble_map = TRUE)
ihmcl_non_con_v_t=ihmcl_non_con_v[2][[1]]
ihmcl_non_con_v_map=niif_bubble_heat_map(ihmcl_non_con_v[1][[1]],k1=16)
## ----------------------------------------
plz_cnt_old=get_plaza_count('mv_ihmcl_base_data_old',nonC=TRUE)
plz_cnt_n=get_plaza_count('mv_ihmcl_curr',nonC=TRUE)
plz_c_map=get_plaza_count('mv_ihmcl_base_data',nonC=TRUE)
#Overal Non-Consinire
ar1=c('Relevant_Date','overall_col','overall_map_col','Overall_Val_per_trnx','overall_map_val_per_trnx')
hd1="Growth in Toll Collections of Overall Non Conc Vehicles (% yoy), "
df_o_c=combine_cur_prev_df(q17,q18)
df_o_mp=combine_cur_prev_df(q19,q20)
df_nc_cf=combine_ovl_map_df(df_o_c,df_o_mp,ar1)
df_nc_cf=generate_df_ihmcl(df_nc_cf,collection =TRUE,hd=hd1)
ar2=c('Relevant_Date','overall_tranx','overall_map_tranx','Overall_Val_per_trnx','overall_map_val_per_trnx')
hd2="Growth in Toll Traffic of Overall Non Conc Vehicles (% yoy), "
df_nc_tf=combine_ovl_map_df(df_o_c,df_o_mp,ar2)
df_nc_tf=generate_df_ihmcl(df_nc_tf,collection =FALSE,hd=hd2)
## ----------------------------------------
mjr_port=df_to_geo_json("mv_ipa_major_ports_citywise_growth",'growth','Total',
bubble_map = TRUE)
mjr_port_t=mjr_port[2][[1]]
mjr_port_map=niif_bubble_heat_map(mjr_port[1][[1]],k1=15)
## ----------------------------------------
minor_port=df_to_geo_json("mv_ipa_minor_port_traffic_statewise_growth",'growth')
minor_port_t=minor_port[2][[1]]
minor_port_map=niif_heat_map(minor_port[1][[1]])
## ----------------------------------------
mnrega_hh=df_to_geo_json("mv_househould_emp_volume_growth",'growth')
mnrega_hh_t=mnrega_hh[2][[1]]
mnrega_hh_map=niif_heat_map(mnrega_hh[1][[1]])
## ----------------------------------------
mnrega_pp=df_to_geo_json("mv_persondays_emp_volume_growth",'growth')
mnrega_pp_t=mnrega_pp[2][[1]]
mnrega_pp_map=niif_heat_map(mnrega_pp[1][[1]])
## ----------------------------------------
naukri=df_to_geo_json("mv_naukri_statewise_avg_growth",'growth')
naukri_t=naukri[2][[1]]
naukri_map=niif_heat_map(naukri[1][[1]])
## ----------------------------------------
pwr_gen=df_to_geo_json("mv_power_state_wise_generation_growth",'growth')
pwr_gen_t=pwr_gen[2][[1]]
pwr_gen_map=niif_heat_map(pwr_gen[1][[1]])
## ----------------------------------------
rail_cargo=df_to_geo_json("mv_irctc_freight_regionwise_monthly_growth",'growth',railway=TRUE)
rail_cargo_t=rail_cargo[2][[1]]
rail_cargo_map=niif_heat_map(rail_cargo[1][[1]])
## ----------------------------------------
rail_psngr=df_to_geo_json("mv_irctc_psnger_region_monthly_growth",'growth',railway=TRUE)
rail_psngr_t=rail_psngr[2][[1]]
rail_psngr_map=niif_heat_map(rail_psngr[1][[1]])
## ----------------------------------------
gdp = get_data("GDP_STATEWISE_TEMP",'GDP')
gdp=table_preprocessing_state_tbl(gdp,unit= 'INR tn',
variable = 'State GSDP (FY2022)',sector='NA'
,divisor = 1000000,rounder = 1)
gst_yoy=get_data("mv_gst_tax_state_india_growth",'growth')
gst_yoy=table_preprocessing_state_tbl(gst_yoy,unit = '% yoy',variable = 'GST collections',
sector = 'Industry',divisor = 0,rounder = 1)
elec_dmd_yoy=get_percent_data("mv_state_electricity_demand_deficit",var1='States',variable = 'Total_Energy_Met+Total_Shortage')
elec_dmd_yoy=table_preprocessing_state_tbl(elec_dmd_yoy,unit = '% yoy',variable = 'Electricity demand',
sector = 'Industry',divisor = 0,rounder = 1)
elec_gen_yoy=get_percent_data("mv_power_states_total_generation_cea",var1 = 'Region',variable='Total')
elec_gen_yoy=table_preprocessing_state_tbl(elec_gen_yoy,unit = '% yoy',variable = 'Electricity generation',
sector = 'Industry',divisor = 0,rounder = 1)
toll_traffic_yoy=get_data("mv_ihmcl_statewise_collection_traffic_growth",'growth',toll=TRUE)
toll_traffic_yoy=table_preprocessing_state_tbl(toll_traffic_yoy,unit = '% yoy',variable = 'Toll Traffic',sector = 'Industry',divisor = 0,rounder = 1)
toll_revenue_yoy=get_data("mv_ihmcl_statewise_collection_amount_growth",'growth',toll=TRUE)
toll_revenue_yoy=table_preprocessing_state_tbl(toll_revenue_yoy,unit = '% yoy',variable = 'Toll Revenue',
sector = 'Industry',divisor = 0,rounder = 1)
epfo_yoy=get_data("mv_epfo_state_growth",'growth')
epfo_yoy=table_preprocessing_state_tbl(epfo_yoy,unit = '% yoy',variable = 'EPFO net additions',
sector = 'Employment',divisor = 0,rounder = 1)
mnrega_hh_yoy=get_data("mv_househould_emp_volume_growth",'growth')
mnrega_hh_yoy=table_preprocessing_state_tbl(mnrega_hh_yoy,unit = '% yoy',variable = 'MNREGA (hh)',
sector = 'Employment',divisor = 0,rounder = 1)
mnrega_per_yoy=get_data("mv_persondays_emp_volume_growth",'growth')
mnrega_per_yoy=table_preprocessing_state_tbl(mnrega_per_yoy,unit = '% yoy',variable = 'MNREGA (persons)',
sector = 'Employment',divisor = 0,rounder = 1)
naukri_yoy=get_percent_data("mv_naukri_statewise_avg",variable= 'Value')
naukri_yoy=table_preprocessing_state_tbl(naukri_yoy,unit = '% yoy',variable ='Job Postings',
sector = 'Employment',divisor = 0,rounder = 1)
two_wh_total=get_data("mv_vr_gr_2w_state",'growth')
two_wh_total=table_preprocessing_state_tbl(two_wh_total,unit = '% yoy',variable ='2W Registrations',sector = 'Automobiles',divisor = 0,rounder = 1)
two_wh_elec_total=get_data("mv_vr_gr_2w_elec_state",'growth')
two_wh_elec_total=table_preprocessing_state_tbl(two_wh_elec_total,unit = '% yoy',variable ='2W Electric Registrations',sector = 'Automobiles',divisor = 0,rounder = 1)
four_wh_total=get_data("mv_vr_gr_4w_state",'growth')
four_wh_total=table_preprocessing_state_tbl(four_wh_total,unit = '% yoy',variable ='4W Registrations',sector = 'Automobiles',divisor = 0,rounder = 1)
four_wh_elec_total=get_data("mv_vr_gr_4w_elec_state",'growth')
four_wh_elec_total=table_preprocessing_state_tbl(four_wh_elec_total,unit = '% yoy',variable ='4W Electric Registrations',sector = 'Automobiles',divisor = 0,rounder = 1)
yoy_hm=rbind(gst_yoy,elec_dmd_yoy,elec_gen_yoy,toll_traffic_yoy,toll_revenue_yoy,epfo_yoy,mnrega_hh_yoy,mnrega_per_yoy,naukri_yoy,two_wh_total,two_wh_elec_total,four_wh_total,four_wh_elec_total)
economic_indicator_gr_st_54 =economic_indicator_table(yoy_hm,has_main_sector = TRUE,
has_units = TRUE,color_coding = TRUE,
rounder_exeptions = yoy_hm$Variable,
font_size = 12,row_height=1,
var_col_width = 3,unit_col_width = 1,
other_col_width = 0.951)
version
source("C:/Users/Administrator/AdQvestDir/codes/LIGHT_HOUSE_PPT_CODES/Light_house_main_code/Light_house_chart_generation.R")
anu_gdp_chart
warnings
warnings()
source("C:/Users/Administrator/AdQvestDir/codes/LIGHT_HOUSE_PPT_CODES/Light_house_main_code/Light_house_chart_generation.R")
warnings()
source("C:/Users/Administrator/AdQvestDir/codes/LIGHT_HOUSE_PPT_CODES/Light_house_main_code/Light_house_chart_generation.R")
warnings()
source("C:/Users/Administrator/AdQvestDir/codes/LIGHT_HOUSE_PPT_CODES/Light_house_main_code/Light_house_chart_generation.R")
source("C:/Users/Administrator/AdQvestDir/codes/LIGHT_HOUSE_PPT_CODES/Light_house_main_code/Light_house_chart_generation.R")
source("C:/Users/Administrator/AdQvestDir/codes/LIGHT_HOUSE_PPT_CODES/Light_house_main_code/Light_house_chart_generation.R")
